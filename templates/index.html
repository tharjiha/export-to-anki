<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/type" href="static/images/anki-icon.png">
    <title>exportToANKI</title>
     <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <h1>exportToANKI</h1>
    <div class="stuff">
        <div class="ontopoftext">
            <button class="exportButton" id="export" style="margin-left: 0; margin-right: auto;">
                Exporting Flashcards Steps
            </button>
            <button class="pasteButton" id="pasteBtn">
                <img src="/static/images/paste.png" style="width:80%; height:80%;">
            </button>
        </div>
        <form action="/submit" method="POST" class="cardForm">
                <textarea name="user_text" id='user_text' placeholder="Enter Quizlet Export..." rows="27" cols="100" class="textarea"></textarea>
                
                <div class="formActions">
                    <input type="submit" value="CREATE" class="createButton">

                    <label>
                        <input type="radio" name="cardType" value="basic" checked>
                        Basic
                    </label><br>

                    <label>
                        <input type="radio" name="cardType" value="cloze">
                        Cloze
                    </label><br>

                    <label>
                        <input type="radio" name="cardType" value="clozeflipped">
                        Cloze Advanced
                    </label>
                </div>
                
                
        </form>
    </div>

    <dialog id="dialogError" class="error">
        <img src="/static/images/x.png" style="width:10%; height:10%;">
        <p>wrong format</p>
        <button id="closeBtn" class="exitButton">Close</button>
    </dialog>

    <dialog id="downloadDialog" class="downloadDialog">
        <a href="/download">
            <button id="download" class="createButton">DOWNLOAD</button>
        </a>
        <button id="closeBtnDownload" class="exitButton">Close</button>
    </dialog>

    <dialog id="tutorialDialog" class="tutorial">
        <h2>HOW TO EXPORT FLASHCARDS FROM QUIZLET</h2>

        <div class="warning">
            WARNING: Quizlet exports do not include images from your flashcard sets.
        </div>

        <h3>Step 1: Access Your Quizlet Deck</h3>
        <p>Go to the Quizlet set you want to export to Anki.</p>
        <img src="/static/images/step1.png" alt="Step 1" style="width:400px; height:auto;">

        <h3>Step 2: Open Export Options</h3>
        <p>Click the three dots (<code>...</code>) in the top-right corner.</p>
        <img src="/static/images/step2.png" alt="Step 2" style="width:400px; height:auto;">

        <h3>Step 3: Select Export</h3>
        <p>From the menu, choose <strong>Export</strong>.</p>
        <img src="/static/images/step3.png" alt="Step 3" style="width:400px; height:auto;">

        <h3>Step 4: Configure Export Settings</h3>
        <ul>
            <p>Set "Between term and definition" to <strong>Tab</strong> and "Between Rows" to <strong>;;</strong>.</p>
        </ul>
        <img src="/static/images/step4.png" alt="Step 4" style="width:400px; height:auto;">

        <p>Now click <strong>Copy Text</strong> and paste it on exportToANKI's textbox</p>
        <p>Also ensure when importing into Anki have HTML format on (Tutorial on uploading to Anki coming soon...)</p>

        <div>
            <p style="color:black;">___</p>
        </div>
        <button id="closeTutBtn" class="exitButton">Close</button>
    </dialog>


    <script>
         // Get popup flags from Flask
        const showPopup = "{{ show_popup }}".toLowerCase() === "true";
        const downloadPopup = "{{ download_popup }}".toLowerCase() === "true";

        const dialogError = document.getElementById('dialogError');
        const dialogDownload = document.getElementById('downloadDialog');
        const dialogTutorial = document.getElementById('tutorialDialog');

        if (showPopup) {
            dialogError.showModal();
        }
        if (downloadPopup) {
            dialogDownload.showModal();
        }
        const exportButton = document.getElementById('export');

        exportButton.addEventListener('click', () => {
            console.log('Clicked');
            dialogTutorial.showModal();
        });

        document.getElementById('closeBtn').onclick = () => dialogError.close();
        document.getElementById('closeBtnDownload').onclick = () => dialogDownload.close();
        document.getElementById('closeTutBtn').onclick = () => dialogTutorial.close();
        document.getElementById('closeBtn').onclick = () => window.location.href = "{{ url_for('home') }}";
    </script>

    <script src="/static/js/script.js"></script>

</body>
</html>